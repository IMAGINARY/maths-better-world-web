{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/applicationDetailsModal.js","js/main.js","js/responsiveMenu.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","ApplicationDetailsModal","_this","this","_classCallCheck","visible","$titleContainer","$","$bodyImage","$bodyText","$bodyLinks","$bodyContainer","append","$modal","html","on","url","replace","application","links","_this2","title","attr","concat","id","body","empty","split","map","each","substr","formatURL","modal","_applicationDetailsModal","window","MathsEverywhere","applications","applicationsById","Object","fromEntries","update","applicationID","location","hash","undefined","show","hide","history","pushState","appLink","ev","preventDefault","$container","$menu","$element","element","clone","addClass","appendTo"],"mappings":"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","file":"bundle-d882f1c709.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class ApplicationDetailsModal {\n  constructor() {\n    this.visible = false;\n    this.$titleContainer = $('<div class=\"modal-title\">');\n    this.$bodyImage = $('<img class=\"modal-body-image img-fluid mb-4\">');\n    this.$bodyText = $('<div class=\"modal-body-text\">');\n    this.$bodyLinks = $('<div class=\"modal-body-links\">');\n\n    this.$bodyContainer = $('<div class=\"modal-body\">')\n      .append($('<div class=\"container-fluid\">')\n        .append($('<div class=\"row\">')\n          .append($('<div class=\"col-lg col-md-12\">')\n            .append(this.$bodyImage))\n          .append($('<div class=\"col-lg col-md-12\">')\n            .append(this.$bodyText)))\n        .append($('<div class=\"row\">')\n          .append($('<div class=\"col\">')\n            .append(this.$bodyLinks))));\n\n    this.$modal = $('<div class=\"modal fade\">')\n      .append($('<div class=\"modal-dialog modal-lg\">')\n        .append($('<div class=\"modal-content\">')\n          .append($('<div class=\"modal-header\">')\n            .append(this.$titleContainer)\n            .append($('<button type=\"button\" class=\"close\" data-dismiss=\"modal\">')\n              .append($('<span>').html('&times;'))))\n          .append(this.$bodyContainer)));\n\n    this.$modal.on('hidden.bs.modal', () => {\n      this.visible = false;\n    });\n\n    this.$modal.on('shown.bs.modal', () => {\n      this.visible = true;\n    });\n  }\n\n  formatURL(url) {\n    return url\n      .replace(/\\//g, '/<wbr>')\n      .replace(/_/g, '_<wbr>')\n      .replace(/\\./g, '.<wbr>');\n  }\n\n  show(application) {\n    this.$titleContainer.html(application.title);\n    this.$bodyImage.attr('src', `assets/img/applications/${application.id}.jpg`);\n    this.$bodyText.html(application.body);\n    this.$bodyLinks.empty();\n    if (application.links) {\n      const links = application.links\n        .split('\\n')\n        .map((each) => {\n          if (each.substr(0, 'http'.length) !== 'http') {\n            return `http://${each}`;\n          }\n          return each;\n        })\n        .map(each => $('<li>')\n          .append($('<a>')\n            .attr('href', each)\n            .attr('target', '_blank')\n            .attr('rel', 'noopener')\n            .html(this.formatURL(each))));\n      this.$bodyLinks.append($('<ul class=\"colored\">').append(links));\n    }\n\n    if (!this.visible) {\n      this.$modal.modal('show');\n    } else {\n      this.$modal.modal('handleUpdate');\n    }\n  }\n\n  hide() {\n    this.$modal.modal('hide');\n  }\n}\n","// eslint-disable-next-line import/no-extraneous-dependencies\nimport './responsiveMenu';\nimport ApplicationDetailsModal from './applicationDetailsModal';\n\nif (window.MathsEverywhere.applications) {\n  window.MathsEverywhere.applicationsById = Object.fromEntries(\n    window.MathsEverywhere.applications.map(each => [each.id, each])\n  );\n}\n\nconst modal = new ApplicationDetailsModal();\n\n// If the modal closes we change the URL. This breaks encapsulation\n// but adding an extra event is overkill at this point.\nmodal.$modal.on('hidden.bs.modal', () => {\n  if (window.history.pushState) {\n    window.history.pushState(null, null, '#');\n  } else {\n    window.location.hash = '';\n  }\n});\n\n/**\n * Redraw the view based on the route\n */\nfunction update() {\n  if (window.location.hash.length > 0) {\n    const applicationID = window.location.hash.replace('#', '');\n    if (window.MathsEverywhere.applicationsById[applicationID] !== undefined) {\n      const application = window.MathsEverywhere.applicationsById[applicationID];\n      modal.show(application);\n    }\n  } else {\n    modal.hide();\n  }\n}\n\n$(window).on('hashchange', () => {\n  update();\n});\nupdate();\n\n// Change the internal links so instead of the default internal\n// navigation they change the hash via \"location.replace\". This\n// changes how navigation history is created. If you\n// click on an application, close it, open another, close it, etc.\n// and then navigate via the back button several times you'll\n// go through all the seen applications instead of seeing\n// home, application, home, application, etc.\n$('.application a').each((i, appLink) => {\n  $(appLink).on('click', (ev) => {\n    ev.preventDefault();\n    window.location.replace($(appLink).attr('href'));\n    return false;\n  });\n});\n","const $container = $('.header-col-title');\n\nconst $menu = $('<div class=\"dropdown-menu dropdown-menu-right\"></div>');\nconst $element = $('<div class=\"menu-responsive dropdown d-xl-none\"></div>')\n  .append($('<button class=\"btn dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">'))\n  .append($menu);\n\n$('.header-menu a').each((i, element) => {\n  $(element).clone().addClass('dropdown-item').appendTo($menu);\n})\n\n$menu.append($('<div class=\"dropdown-divider\"></div>'));\n\n$('.lang-switcher .dropdown-item').clone().appendTo($menu);\n\n$container.append($element);\n"]}